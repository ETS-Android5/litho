"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4813,4957,8723,8e3,5730],{3905:(e,t,n)=>{n.r(t),n.d(t,{MDXContext:()=>c,MDXProvider:()=>d,mdx:()=>h,useMDXComponents:()=>p,withMDXComponents:()=>u});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a.apply(this,arguments)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=o.createContext({}),u=function(e){return function(t){var n=p(t.components);return o.createElement(e,a({},t,{components:n}))}},p=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=p(e.components);return o.createElement(c.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},f=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(n),d=r,f=u["".concat(s,".").concat(d)]||u[d]||m[d]||a;return n?o.createElement(f,l(l({ref:t},c),{},{components:n})):o.createElement(f,l({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,s=new Array(a);s[0]=f;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:r,s[1]=l;for(var c=2;c<a;c++)s[c]=n[c];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}f.displayName="MDXCreateElement"},58215:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var o=n(67294);const r=function(e){var t=e.children,n=e.hidden,r=e.className;return o.createElement("div",{role:"tabpanel",hidden:n,className:r},t)}},55064:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var o=n(87462),r=n(67294),a=n(72389),s=n(79443);const l=function(){var e=(0,r.useContext)(s.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e};var i=n(83039),c=n(86010);const u="tabItem_1uMI";function p(e){var t,n,o,a=e.lazy,s=e.block,p=e.defaultValue,d=e.values,m=e.groupId,f=e.className,h=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),y=null!=d?d:h.map((function(e){var t=e.props;return{value:t.value,label:t.label}})),v=(0,i.duplicates)(y,(function(e,t){return e.value===t.value}));if(v.length>0)throw new Error('Docusaurus error: Duplicate values "'+v.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var g=null===p?p:null!=(t=null!=p?p:null==(n=h.find((function(e){return e.props.default})))?void 0:n.props.value)?t:null==(o=h[0])?void 0:o.props.value;if(null!==g&&!y.some((function(e){return e.value===g})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+g+'" but none of its children has the corresponding value. Available values are: '+y.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var b=l(),k=b.tabGroupChoices,x=b.setTabGroupChoices,N=(0,r.useState)(g),w=N[0],T=N[1],O=[],C=(0,i.useScrollPositionBlocker)().blockElementScrollPositionUntilNextRender;if(null!=m){var P=k[m];null!=P&&P!==w&&y.some((function(e){return e.value===P}))&&T(P)}var E=function(e){var t=e.currentTarget,n=O.indexOf(t),o=y[n].value;o!==w&&(C(t),T(o),null!=m&&x(m,o))},j=function(e){var t,n=null;switch(e.key){case"ArrowRight":var o=O.indexOf(e.currentTarget)+1;n=O[o]||O[0];break;case"ArrowLeft":var r=O.indexOf(e.currentTarget)-1;n=O[r]||O[O.length-1]}null==(t=n)||t.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,c.default)("tabs",{"tabs--block":s},f)},y.map((function(e){var t=e.value,n=e.label;return r.createElement("li",{role:"tab",tabIndex:w===t?0:-1,"aria-selected":w===t,className:(0,c.default)("tabs__item",u,{"tabs__item--active":w===t}),key:t,ref:function(e){return O.push(e)},onKeyDown:j,onFocus:E,onClick:E},null!=n?n:t)}))),a?(0,r.cloneElement)(h.filter((function(e){return e.props.value===w}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},h.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==w})}))))}function d(e){var t=(0,a.default)();return r.createElement(p,(0,o.Z)({key:String(t)},e))}},82924:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n(67294).createContext(void 0)},85350:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(67294),r=n(82924);const a=function(){var e=(0,o.useContext)(r.Z);if(null==e)throw new Error('"useThemeContext" is used outside of "Layout" component. Please see https://docusaurus.io/docs/api/themes/configuration#usethemecontext.');return e}},75960:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(87462),r=n(67294),a=n(24544),s=n(7694),l=n(13618),i="0.41.2",c="0.41.3-SNAPSHOT",u="0.9.0",p="0.46.0",d=n(85350);const m=function(e){var t=e.language,n=e.code.replace(/{{site.lithoVersion}}/g,i).replace(/{{site.soloaderVersion}}/g,u).replace(/{{site.lithoSnapshotVersion}}/g,c).replace(/{{site.flipperVersion}}/g,p).trim(),m=(0,d.Z)().isDarkTheme?l.Z:s.Z;return r.createElement(a.ZP,(0,o.Z)({},a.lG,{code:n,language:t,theme:m}),(function(e){var t=e.className,n=e.style,o=e.tokens,a=e.getLineProps,s=e.getTokenProps;return r.createElement("pre",{className:t,style:n},o.map((function(e,t){return r.createElement("div",a({line:e,key:t}),e.map((function(e,t){return r.createElement("span",s({token:e,key:t}))})))})))}))}},56481:(e,t,n)=>{n.r(t),n.d(t,{frontMatter:()=>l,contentTitle:()=>i,metadata:()=>c,toc:()=>u,default:()=>d});var o=n(87462),r=n(63366),a=(n(67294),n(3905)),s=(n(55064),n(58215),n(75960),["components"]),l={id:"hooks-intro",title:"Introduction to Hooks"},i=void 0,c={unversionedId:"mainconcepts/hooks-intro",id:"mainconcepts/hooks-intro",isDocsHomePage:!1,title:"Introduction to Hooks",description:"Definition: Hooks are special functions that can persist state across renders and perform side effects. They begin with use and may only be called from render() and other hooks. The API is heavily inspired by React Hooks.",source:"@site/../docs/mainconcepts/hooks-intro.mdx",sourceDirName:"mainconcepts",slug:"/mainconcepts/hooks-intro",permalink:"/docs/mainconcepts/hooks-intro",editUrl:"https://github.com/facebook/litho/edit/master/website/../docs/mainconcepts/hooks-intro.mdx",tags:[],version:"current",frontMatter:{id:"hooks-intro",title:"Introduction to Hooks"},sidebar:"mainSidebar",previous:{title:"Types of Props",permalink:"/docs/mainconcepts/props"},next:{title:"useState",permalink:"/docs/mainconcepts/use-state"}},u=[{value:"Example: <code>useState</code>",id:"example-usestate",children:[],level:3},{value:"Rules for Hooks",id:"rules-for-hooks",children:[],level:2}],p={toc:u};function d(e){var t=e.components,n=(0,r.Z)(e,s);return(0,a.mdx)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.mdx)("div",{className:"admonition admonition-note alert alert--secondary"},(0,a.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,a.mdx)("h5",{parentName:"div"},(0,a.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,a.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,a.mdx)("div",{parentName:"div",className:"admonition-content"},(0,a.mdx)("p",{parentName:"div"},(0,a.mdx)("strong",{parentName:"p"},"Definition"),": ",(0,a.mdx)("em",{parentName:"p"},"Hooks")," are special functions that can persist state across renders and perform side effects. They begin with ",(0,a.mdx)("inlineCode",{parentName:"p"},"use")," and may only be called from ",(0,a.mdx)("inlineCode",{parentName:"p"},"render()")," and other hooks. The API is heavily inspired by ",(0,a.mdx)("a",{parentName:"p",href:"https://reactjs.org/docs/hooks-intro.html"},"React Hooks"),"."))),(0,a.mdx)("p",null,"Hooks are Litho's way to enable components to persist state across renders and register for lifecycle events while remaining immutable. Litho has a suite of built in hooks whose docs you'll find in this section."),(0,a.mdx)("p",null,"As a brief introduction, some of the most common ones you'll encounter are:"),(0,a.mdx)("ul",null,(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("strong",{parentName:"li"},(0,a.mdx)("a",{parentName:"strong",href:"/docs/mainconcepts/use-state"},"useState"))," - keeps track of a variable across renders."),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("strong",{parentName:"li"},(0,a.mdx)("a",{parentName:"strong",href:"/docs/mainconcepts/use-effect"},"useEffect"))," - lets a component perform side effects when it's attached or detached from the tree."),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("strong",{parentName:"li"},(0,a.mdx)("a",{parentName:"strong",href:"/docs/mainconcepts/use-ref"},"useRef"))," - keeps track of a mutable reference across renders.")),(0,a.mdx)("h3",{id:"example-usestate"},"Example: ",(0,a.mdx)("inlineCode",{parentName:"h3"},"useState")),(0,a.mdx)("p",null,"To demonstrate usage of hooks in practice, the component below implements a simple counter; whenever it's clicked, it increments the number of clicks and re-renders:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-kotlin",metastring:"{3}","{3}":!0},'class CounterComponent : KComponent() {\n  override fun ComponentScope.render(): Component {\n    val clicks = useState { 0 }\n    return Text(\n        style = Style.onClick { clicks.update { c -> c + 1 } },\n        text = "Clicks: ${clicks.value}")\n  }\n}\n')),(0,a.mdx)("p",null,"As shown in the above code, ",(0,a.mdx)("inlineCode",{parentName:"p"},"useState")," is a hook that can keep track of a variable across renders. The first time it's called it returns the initial value (",(0,a.mdx)("inlineCode",{parentName:"p"},"0"),").  Subsequent calls return the current value of the state. For more information about state, see the ",(0,a.mdx)("a",{parentName:"p",href:"/docs/mainconcepts/use-state"},"useState")," page."),(0,a.mdx)("p",null,"The identity of ",(0,a.mdx)("inlineCode",{parentName:"p"},"useState")," is just the sequence of the call within the render function. So, to add another state variable, you can just add another call to ",(0,a.mdx)("inlineCode",{parentName:"p"},"useState"),". However, this leads to some important rules about preserving the identity of hooks!"),(0,a.mdx)("h2",{id:"rules-for-hooks"},"Rules for Hooks"),(0,a.mdx)("p",null,"Hooks maintain state by using the identity of the current component along with the sequence of the call within the component. This means that in a render, the first ",(0,a.mdx)("inlineCode",{parentName:"p"},"useState")," call will maintain one piece of state, a second ",(0,a.mdx)("inlineCode",{parentName:"p"},"useState")," call will maintain another, and so on, and they'll be consistent across render passes."),(0,a.mdx)("p",null,"As such, there are ",(0,a.mdx)("strong",{parentName:"p"},"three hooks rules")," that you need to remember:"),(0,a.mdx)("ol",null,(0,a.mdx)("li",{parentName:"ol"},"Hooks can only be called from ",(0,a.mdx)("inlineCode",{parentName:"li"},"render()")," or from another hook."),(0,a.mdx)("li",{parentName:"ol"},"Hook cannot be called conditionally, which means they cannot be called from within conditionals (if/for/while/...), or called ",(0,a.mdx)("strong",{parentName:"li"},"after"),' an "early exit" check (such as ',(0,a.mdx)("inlineCode",{parentName:"li"},"if (...) return null"),")."),(0,a.mdx)("li",{parentName:"ol"},"Hook names should start with ",(0,a.mdx)("inlineCode",{parentName:"li"},"use"),".")),(0,a.mdx)("p",null,"The reasons for rules 1 and 2 are to preserve hook identity, as mentioned above. Rule 3 is just to make it easier to tell when a function has hook-like behavior."),(0,a.mdx)("p",null,"It may prove helpful to look at some more examples, starting with the most fundamental hook: ",(0,a.mdx)("a",{parentName:"p",href:"/docs/mainconcepts/use-state"},"useState"),"!"))}d.isMDXComponent=!0},24544:(e,t,n)=>{n.d(t,{ZP:()=>f,lG:()=>s});var o=n(87410);const r={plain:{backgroundColor:"#2a2734",color:"#9a86fd"},styles:[{types:["comment","prolog","doctype","cdata","punctuation"],style:{color:"#6c6783"}},{types:["namespace"],style:{opacity:.7}},{types:["tag","operator","number"],style:{color:"#e09142"}},{types:["property","function"],style:{color:"#9a86fd"}},{types:["tag-id","selector","atrule-id"],style:{color:"#eeebff"}},{types:["attr-name"],style:{color:"#c4b9fe"}},{types:["boolean","string","entity","url","attr-value","keyword","control","directive","unit","statement","regex","at-rule","placeholder","variable"],style:{color:"#ffcc99"}},{types:["deleted"],style:{textDecorationLine:"line-through"}},{types:["inserted"],style:{textDecorationLine:"underline"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["important"],style:{color:"#c4b9fe"}}]};var a=n(67294),s={Prism:o.default,theme:r};function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i.apply(this,arguments)}var c=/\r\n|\r|\n/,u=function(e){0===e.length?e.push({types:["plain"],content:"\n",empty:!0}):1===e.length&&""===e[0].content&&(e[0].content="\n",e[0].empty=!0)},p=function(e,t){var n=e.length;return n>0&&e[n-1]===t?e:e.concat(t)},d=function(e,t){var n=e.plain,o=Object.create(null),r=e.styles.reduce((function(e,n){var o=n.languages,r=n.style;return o&&!o.includes(t)||n.types.forEach((function(t){var n=i({},e[t],r);e[t]=n})),e}),o);return r.root=n,r.plain=i({},n,{backgroundColor:null}),r};function m(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&-1===t.indexOf(o)&&(n[o]=e[o]);return n}const f=function(e){function t(){for(var t=this,n=[],o=arguments.length;o--;)n[o]=arguments[o];e.apply(this,n),l(this,"getThemeDict",(function(e){if(void 0!==t.themeDict&&e.theme===t.prevTheme&&e.language===t.prevLanguage)return t.themeDict;t.prevTheme=e.theme,t.prevLanguage=e.language;var n=e.theme?d(e.theme,e.language):void 0;return t.themeDict=n})),l(this,"getLineProps",(function(e){var n=e.key,o=e.className,r=e.style,a=i({},m(e,["key","className","style","line"]),{className:"token-line",style:void 0,key:void 0}),s=t.getThemeDict(t.props);return void 0!==s&&(a.style=s.plain),void 0!==r&&(a.style=void 0!==a.style?i({},a.style,r):r),void 0!==n&&(a.key=n),o&&(a.className+=" "+o),a})),l(this,"getStyleForToken",(function(e){var n=e.types,o=e.empty,r=n.length,a=t.getThemeDict(t.props);if(void 0!==a){if(1===r&&"plain"===n[0])return o?{display:"inline-block"}:void 0;if(1===r&&!o)return a[n[0]];var s=o?{display:"inline-block"}:{},l=n.map((function(e){return a[e]}));return Object.assign.apply(Object,[s].concat(l))}})),l(this,"getTokenProps",(function(e){var n=e.key,o=e.className,r=e.style,a=e.token,s=i({},m(e,["key","className","style","token"]),{className:"token "+a.types.join(" "),children:a.content,style:t.getStyleForToken(a),key:void 0});return void 0!==r&&(s.style=void 0!==s.style?i({},s.style,r):r),void 0!==n&&(s.key=n),o&&(s.className+=" "+o),s})),l(this,"tokenize",(function(e,t,n,o){var r={code:t,grammar:n,language:o,tokens:[]};e.hooks.run("before-tokenize",r);var a=r.tokens=e.tokenize(r.code,r.grammar,r.language);return e.hooks.run("after-tokenize",r),a}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this.props,t=e.Prism,n=e.language,o=e.code,r=e.children,a=this.getThemeDict(this.props),s=t.languages[n];return r({tokens:function(e){for(var t=[[]],n=[e],o=[0],r=[e.length],a=0,s=0,l=[],i=[l];s>-1;){for(;(a=o[s]++)<r[s];){var d=void 0,m=t[s],f=n[s][a];if("string"==typeof f?(m=s>0?m:["plain"],d=f):(m=p(m,f.type),f.alias&&(m=p(m,f.alias)),d=f.content),"string"==typeof d){var h=d.split(c),y=h.length;l.push({types:m,content:h[0]});for(var v=1;v<y;v++)u(l),i.push(l=[]),l.push({types:m,content:h[v]})}else s++,t.push(m),n.push(d),o.push(0),r.push(d.length)}s--,t.pop(),n.pop(),o.pop(),r.pop()}return u(l),i}(void 0!==s?this.tokenize(t,o,s,n):[o]),className:"prism-code language-"+n,style:void 0!==a?a.root:{},getLineProps:this.getLineProps,getTokenProps:this.getTokenProps})},t}(a.Component)},13618:(e,t,n)=>{n.d(t,{Z:()=>o});const o={plain:{color:"#F8F8F2",backgroundColor:"#282A36"},styles:[{types:["prolog","constant","builtin"],style:{color:"rgb(189, 147, 249)"}},{types:["inserted","function"],style:{color:"rgb(80, 250, 123)"}},{types:["deleted"],style:{color:"rgb(255, 85, 85)"}},{types:["changed"],style:{color:"rgb(255, 184, 108)"}},{types:["punctuation","symbol"],style:{color:"rgb(248, 248, 242)"}},{types:["string","char","tag","selector"],style:{color:"rgb(255, 121, 198)"}},{types:["keyword","variable"],style:{color:"rgb(189, 147, 249)",fontStyle:"italic"}},{types:["comment"],style:{color:"rgb(98, 114, 164)"}},{types:["attr-name"],style:{color:"rgb(241, 250, 140)"}}]}},7694:(e,t,n)=>{n.d(t,{Z:()=>o});const o={plain:{color:"#393A34",backgroundColor:"#f6f8fa"},styles:[{types:["comment","prolog","doctype","cdata"],style:{color:"#999988",fontStyle:"italic"}},{types:["namespace"],style:{opacity:.7}},{types:["string","attr-value"],style:{color:"#e3116c"}},{types:["punctuation","operator"],style:{color:"#393A34"}},{types:["entity","url","symbol","number","boolean","variable","constant","property","regex","inserted"],style:{color:"#36acaa"}},{types:["atrule","keyword","attr-name","selector"],style:{color:"#00a4db"}},{types:["function","deleted","tag"],style:{color:"#d73a49"}},{types:["function-variable"],style:{color:"#6f42c1"}},{types:["tag","selector","keyword"],style:{color:"#00009f"}}]}}}]);